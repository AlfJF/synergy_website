<nav class="navbar navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle"
            data-toggle="collapse"
            data-target="#contenido-plegable">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <span class="navbar-brand" > Hola {{idUsuario}}</span>
    </div>
    <div class="collapse navbar-collapse" id="contenido-plegable">
        <ul class="nav navbar-nav navbar-left">
            <li><a ng-click="APagina1(idUsuario)">PÃ¡gina de usuario</a></li>
            <li><a ng-click="VContactos2(idUsuario)">Contactos</a></li>
            <li><a ng-click="VForos()">Foros</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
            <li class="navbar-text" ng-show="idUsuario" ng-bind="idUsuario"></li>
            <li><a ng-click="__ayuda()"><span class="glyphicon glyphicon-info-sign"></span></a></li>
            <li><a ng-click="VPrincipal0()">Regresar</a></li>
        </ul>
    </div>
</div>
</nav>
<div class="row" >
    <div class="col-md-6"><h3>{{pag.titulo}}</h3>{{pag.contenido}}</div>
    <div class="col-md-6"><br><img ng-src="{{pag.imagenes}}"></a></div>
</div>
<br>
<div class="row">
    <div class="col-md-6">
        <div ng-if="!comentarios">
            <button ng-click="mostrarComentarios(pag.hilo)" class="btn btn-perso btn-lg btn-block">
                Ver comentarios
            </button>
        </div>
        <div ng-if="comentarios" class="well">
            <h4>Comentarios:</h4>
            <ul>
                <li ng-repeat="publicacion in publicacion.hijos" ng-include="'tree_item_renderer.html'"></li>
            </ul>
            <div ng-include="'responder_Publicacion.html'"></div>
    </div>
</div>
</div>
<br>

<!-- Templates -->
<script type="text/ng-template"  id="tree_item_renderer.html">
    <h4>{{publicacion.autor}} 
        <span ng-click="colapsar(publicacion.id)" id="{{'boton' + publicacion.id }}">[-]</span>
    </h4>
    <div id="{{'publicacion' + publicacion.id}}">
        <p>{{publicacion.contenido}}</p>
        <button ng-click="AElimPublicacion1(publicacion.id)" ng-show="!publicacion.eliminada && publicacion.autor == idUsuario">Eliminar</button>
        <button ng-show="!esInvitado" ng-click="responderPublicacion(publicacion)" ng-show="!publicacion.eliminada">Responder</button>
        <ul>
            <li ng-repeat="publicacion in publicacion.hijos" ng-include="'tree_item_renderer.html'"></li>
        </ul>
    </div>
</script>

<script type="text/ng-template" id="responder_Publicacion.html">
    <form ng-show="!esInvitado" name="fpublicacionForm" ng-submit="AgregPublicacion3(fpublicacionForm.$valid, publicacion.id)" novalidate>
        <div class="form-group" ng-class="{ 'has-error' : fpublicacionFormSubmitted && fpublicacionForm.texto.$invalid && fpublicacionForm.texto.$pristine && fpublicacionSubmitted}">
        <label for="fpublicacion_texto">
            Tu comentario:
        </label>
        <textarea  type="text" id="fpublicacion_texto" name="texto" class="form-control" ng-model="fpublicacion.texto" placeholder="Texto" required>
            
        </textarea >
        <p ng-show="error && fpublicacionForm.texto.$invalid" class="help-block">
            Error en campo Texto.
        </p>
    </div>
    <button type="submit" class="btn btn-perso btn-lg btn-block">
        <span class="glyphicon glyphicon-pencil"></span> Enviar
    </button>
</form>
</script>

<div id="right"></div>
